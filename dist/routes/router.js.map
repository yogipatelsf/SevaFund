{"version":3,"sources":["../../server/routes/router.js"],"names":["db","require","dbApi","app","get","req","res","Charity","find","then","results","json","post","Donor","create","Email","body","login","email","Username","username","Password","password","send","Project","dbModel","catch","err","status","findById","params","id","put","findOneAndUpdate","_id","module","exports"],"mappings":";AACA,MAAMA,KAAKC,QAAQ,WAAR,CAAX;;AAGA;AACA;AACA;AACA,MAAMC,QAAQC,OAAO;;AAEpBA,KAAIC,GAAJ,CAAQ,YAAR,EAAsB,CAACC,GAAD,EAAMC,GAAN,KAAc;AACnC;AACAN,KAAGO,OAAH,CAAWC,IAAX,CAAgB,EAAhB,EACEC,IADF,CACOC,WAAW;AAChB;AACAJ,OAAIK,IAAJ,CAASD,OAAT;AACA,GAJF;AAKC,EAPF;;AASAP,KAAIS,IAAJ,CAAS,SAAT,EAAoB,CAACP,GAAD,EAAMC,GAAN,KAAc;AACjC;AACA;AACAN,KAAGa,KAAH,CAASC,MAAT,CAAgB;AACfC,UAAOV,IAAIW,IAAJ,CAASC,KAAT,CAAeC,KADP;AAEfC,aAAUd,IAAIW,IAAJ,CAASC,KAAT,CAAeG,QAFV;AAGfC,aAAUhB,IAAIW,IAAJ,CAASC,KAAT,CAAeK;AAHV,GAAhB,EAKEb,IALF,CAKOC,WAAW;AAChBJ,OAAIiB,IAAJ,CAAS,oBAAT;AACA,GAPF;AASC,EAZF;;AAcE;AACFpB,KAAIC,GAAJ,CAAQ,eAAR,EAAyB,CAACC,GAAD,EAAMC,GAAN,KAAc;AACtCN,KAAGwB,OAAH,CACChB,IADD,CACM,EADN,EAECC,IAFD,CAEMgB,WAAWnB,IAAIK,IAAJ,CAASc,OAAT,CAFjB,EAGCC,KAHD,CAGOC,OAAOrB,IAAIsB,MAAJ,CAAW,GAAX,EAAgBjB,IAAhB,CAAqBgB,GAArB,CAHd;AAIC,EALF;;AAQAxB,KAAIS,IAAJ,CAAS,eAAT,EAA0B,CAACP,GAAD,EAAMC,GAAN,KAAc;AACvCN,KAAGwB,OAAH,CACCV,MADD,CACQT,IAAIW,IADZ,EAECP,IAFD,CAEMgB,WAAWnB,IAAIK,IAAJ,CAASc,OAAT,CAFjB,EAGCC,KAHD,CAGOC,OAAOrB,IAAIsB,MAAJ,CAAW,GAAX,EAAgBjB,IAAhB,CAAqBgB,GAArB,CAHd;AAIA,EALD;;AAOA;AACGxB,KAAIC,GAAJ,CAAQ,mBAAR,EAA6B,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC7CN,KAAGwB,OAAH,CACCK,QADD,CACUxB,IAAIyB,MAAJ,CAAWC,EADrB,EAECtB,IAFD,CAEMgB,WAAWnB,IAAIK,IAAJ,CAASc,OAAT,CAFjB,EAGCC,KAHD,CAGOC,OAAOrB,IAAIsB,MAAJ,CAAW,GAAX,EAAgBjB,IAAhB,CAAqBgB,GAArB,CAHd;AAIA,EALE;;AAOHxB,KAAI6B,GAAJ,CAAQ,mBAAR,EAA6B,CAAC3B,GAAD,EAAMC,GAAN,KAAc;AAC1CN,KAAGwB,OAAH,CACCS,gBADD,CACkB,EAAEC,KAAK7B,IAAIyB,MAAJ,CAAWC,EAAlB,EADlB,EAC0C1B,IAAIW,IAD9C,EAECP,IAFD,CAEMgB,WAAWnB,IAAIK,IAAJ,CAASc,OAAT,CAFjB,EAGCC,KAHD,CAGOC,OAAOrB,IAAIsB,MAAJ,CAAW,GAAX,EAAgBjB,IAAhB,CAAqBgB,GAArB,CAHd;AAIA,EALD;;AAOA,QAAOxB,GAAP;AAEA,CA1DD;;AA4DAgC,OAAOC,OAAP,GAAiBlC,KAAjB;AACA","file":"router.js","sourcesContent":["\nconst db = require('../models');\n\n\n// router.get('/', (req, res) => {\n// \tres.send(\"get request received\")\n// });\nconst dbApi = app => {\n\n\tapp.get('/charities', (req, res) => {\n\t\t// res.send(\"get request received\")\n\t\tdb.Charity.find({})\n\t\t\t.then(results => {\n\t\t\t\t// console.log(\" get response sent\")\n\t\t\t\tres.json(results);\n\t\t\t})\t\n\t\t});\n\t\n\tapp.post('/donors', (req, res) => {\n\t\t// console.log(\"logging req body\")\n\t\t// console.log(req.body)\n\t\tdb.Donor.create({\n\t\t\tEmail: req.body.login.email,\n\t\t\tUsername: req.body.login.username,\n\t\t\tPassword: req.body.login.password\n\t\t})\n\t\t\t.then(results => {\n\t\t\t\tres.send(\"posted to database\");\n\t\t\t})\n\t\n\t\t});\n\n\t\t\t// Matches with \"/api/projects\"\n\tapp.get(\"/api/projects\", (req, res) => {\t\t\t\n\t\tdb.Project\n\t\t.find({})\n\t\t.then(dbModel => res.json(dbModel))\n\t\t.catch(err => res.status(422).json(err));\n\t\t})\n\t\t  \n\t\t \n\tapp.post(\"/api/projects\", (req, res) => {\n\t\tdb.Project\n\t\t.create(req.body)\n\t\t.then(dbModel => res.json(dbModel))\n\t\t.catch(err => res.status(422).json(err));\n\t});\n\n\t//// Matches with \"/api/projects/:id\"\n    app.get(\"/api/projects/:id\", (req, res) => {\n\t\tdb.Project\n\t\t.findById(req.params.id)\n\t\t.then(dbModel => res.json(dbModel))\n\t\t.catch(err => res.status(422).json(err));\n\t})\n\t\n\tapp.put(\"/api/projects/:id\", (req, res) => {\n\t\tdb.Project\n\t\t.findOneAndUpdate({ _id: req.params.id }, req.body)\n\t\t.then(dbModel => res.json(dbModel))\n\t\t.catch(err => res.status(422).json(err));\n\t})\n\n\treturn app\n\n}\n\nmodule.exports = dbApi;\n//https://appdividend.com/2017/06/28/mern-stack-tutorial/"]}